<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FleetPro | Master Hub</title>
    
    <!-- UI Frameworks -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app-shell">
        
        <!-- SIDEBAR -->
        <aside id="sidebar">
            <div class="sidebar-header">
                <div class="logo-box"><i data-lucide="shield-check"></i></div>
                <span class="logo-text">FLEETPRO</span>
            </div>
            
            <nav class="sidebar-nav">
                <button onclick="window.tab('dashboard')" class="nav-btn active" data-tab="dashboard"><i data-lucide="layout-grid"></i> <span>Dashboard</span></button>
                <button onclick="window.tab('calendar')" class="nav-btn" data-tab="calendar"><i data-lucide="calendar"></i> <span>Calendar</span></button>
                <button onclick="window.tab('driverlog')" class="nav-btn" data-tab="driverlog"><i data-lucide="clipboard-list"></i> <span>Driver Log</span></button>
                <button onclick="window.tab('trucks')" class="nav-btn" data-tab="trucks"><i data-lucide="truck"></i> <span>Truck Units</span></button>
                <button onclick="window.tab('scan')" class="nav-btn" data-tab="scan"><i data-lucide="maximize"></i> <span>AI Scanner</span></button>
                <button onclick="window.tab('inventory')" class="nav-btn" data-tab="inventory"><i data-lucide="package"></i> <span>Inventory</span></button>
                <button onclick="window.tab('dispatch')" class="nav-btn" data-tab="dispatch"><i data-lucide="briefcase"></i> <span>Dispatch</span></button>
                <button onclick="window.tab('clients')" class="nav-btn" data-tab="clients"><i data-lucide="users"></i> <span>CRM / Clients</span></button>
                <button onclick="window.tab('ai')" class="nav-btn" data-tab="ai"><i data-lucide="bot"></i> <span>AI Auditor</span></button>
            </nav>

            <div class="sidebar-footer">
                <p id="user-id-tag">NODE_SECURE</p>
            </div>
        </aside>

        <!-- MAIN VIEWPORT -->
        <main id="viewport">
            <header id="main-header">
                <h2 id="tab-title">DASHBOARD</h2>
                <div class="header-right">
                    <div id="live-clock">00:00:00</div>
                    <div class="status-indicator"><span class="pulse"></span> LIVE_LINK</div>
                </div>
            </header>

            <div id="panels-container">
                
                <!-- DASHBOARD TAB -->
                <section id="dashboard-tab" class="tab-panel active">
                    <div class="dash-content">
                        <div class="stat-grid">
                            <!-- Clickable Dashboard Tiles -->
                            <div class="stat-tile primary" onclick="window.tab('clients')">
                                <p class="tile-label">Operating Capital</p>
                                <h2 id="total-display">$0.00</h2>
                            </div>
                            <div class="stat-tile" onclick="window.tab('trucks')">
                                <p class="tile-label">Fleet Count</p>
                                <h2 id="dash-truck-count">0</h2>
                            </div>
                        </div>

                        <div class="calendar-wrapper">
                            <div class="wrapper-header">
                                <h3>Operational Schedule</h3>
                                <button class="action-btn-sm" onclick="window.openEventModal()">+ Schedule</button>
                            </div>
                            <div id="dash-calendar"></div>
                        </div>

                        <div class="ledger-wrapper">
                            <h3>Master Ledger</h3>
                            <div id="ledger-stream"></div>
                        </div>
                    </div>
                </section>

                <!-- TRUCKS TAB -->
                <section id="trucks-tab" class="tab-panel">
                    <div class="page-content">
                        <div class="page-header">
                            <h3>Fleet Registry</h3>
                            <button class="action-btn" onclick="window.openTruckModal()">Add Unit</button>
                        </div>
                        <div id="trucks-vitals-injection" class="vitals-row"></div>
                        <div id="trucks-table-injection" class="spreadsheet-box"></div>
                    </div>
                </section>

                <!-- OTHER TABS (Placeholders for injection) -->
                <section id="driverlog-tab" class="tab-panel"><div class="page-content" id="driverlog-injection"></div></section>
                <section id="dispatch-tab" class="tab-panel"><div class="page-content" id="dispatch-injection"></div></section>
                <section id="clients-tab" class="tab-panel"><div class="page-content" id="clients-injection"></div></section>
                <section id="calendar-tab" class="tab-panel"><div class="full-page-cal" id="full-calendar-render"></div></section>
            </div>
        </main>
    </div>

    <!-- MODALS -->
    <div id="truck-modal" class="modal-overlay hidden">
        <div class="modal-box">
            <h3>Register Unit</h3>
            <input type="text" id="t-id" class="modal-input uppercase" placeholder="Unit ID">
            <input type="text" id="t-make" class="modal-input" placeholder="Make/Model">
            <input type="number" id="t-miles" class="modal-input" placeholder="Mileage">
            <select id="t-status" class="modal-input">
                <option value="Operational">Operational</option>
                <option value="In Transit">In Transit</option>
                <option value="Maintenance">Maintenance</option>
            </select>
            <button class="modal-save" onclick="window.saveTruckUnit()">SYNC DATA</button>
            <button class="modal-cancel" onclick="window.closeModal()">Cancel</button>
        </div>
    </div>

    <div id="event-modal" class="modal-overlay hidden">
        <div class="modal-box">
            <h3>Add Task</h3>
            <input type="text" id="ev-title" class="modal-input" placeholder="Task Name">
            <input type="date" id="ev-date" class="modal-input">
            <button class="modal-save" onclick="window.saveEvent()">UPDATE SCHEDULE</button>
            <button class="modal-cancel" onclick="window.closeModal()">Back</button>
        </div>
    </div>

    <script src="script.js" type="module"></script>
</body>
</html>

