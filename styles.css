:root{
  --bg1:#071025;
  --bg2:#0b1c3c;
  --panel: rgba(255,255,255,.06);
  --panel2: rgba(255,255,255,.04);
  --stroke: rgba(255,255,255,.09);
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.60);
  --muted2: rgba(255,255,255,.45);
  --shadow: 0 18px 60px rgba(0,0,0,.35);
  --radius: 18px;
  --radius2: 14px;
  --sidebar-w: 260px;
  --topbar-h: 72px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--text);
  background:
    radial-gradient(1200px 700px at 20% 10%, rgba(90,120,255,.25), transparent 60%),
    radial-gradient(900px 600px at 80% 20%, rgba(90,255,220,.12), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
  overflow:hidden; /* app handles scroll internally */
}

/* App shell */
.app-shell{
  height:100%;
  display:grid;
  grid-template-columns: var(--sidebar-w) 1fr;
}

/* Sidebar */
.sidebar{
  padding:18px;
  border-right: 1px solid rgba(255,255,255,.07);
  background: rgba(0,0,0,.12);
  backdrop-filter: blur(18px);
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:14px;
}
.brand-mark{
  width:42px; height:42px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(120,160,255,.9), rgba(255,255,255,.12));
  box-shadow: 0 10px 25px rgba(0,0,0,.35);
}
.brand-title{ font-weight: 800; letter-spacing:.8px; }
.brand-subtitle{ color: var(--muted2); font-size: 12px; }

.nav{ display:flex; flex-direction:column; gap:8px; margin-top:12px; }
.nav-sep{ height:14px; }

.navbtn{
  text-align:left;
  width:100%;
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  padding:12px 12px;
  border-radius: 14px;
  cursor:pointer;
}
.navbtn:hover{ background: rgba(255,255,255,.05); color: var(--text); }
.navbtn.active{
  background: rgba(120,160,255,.22);
  border-color: rgba(120,160,255,.35);
  color: var(--text);
}

.sidebar-footer{
  position:absolute;
  left:18px; right:18px; bottom:18px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.pill{
  padding:10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.03);
  color: var(--muted);
  font-size: 12px;
}
.pill.subtle{ opacity:.75; }

/* Main */
.main{
  height:100%;
  display:grid;
  grid-template-rows: var(--topbar-h) auto 1fr;
  min-width:0;
}

/* Topbar */
.topbar{
  position: sticky;
  top:0;
  z-index: 50;
  height: var(--topbar-h);
  padding: 14px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom: 1px solid rgba(255,255,255,.07);
  background: rgba(0,0,0,.10);
  backdrop-filter: blur(18px);
}

.h1{ font-size: 22px; font-weight: 850; }
.h2{ font-size: 13px; color: var(--muted); margin-top:2px; }

.topbar-right{
  display:flex;
  gap:10px;
  align-items:center;
}

.badge{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color: var(--muted);
  font-size: 12px;
  white-space: nowrap;
}
.badge .dot{
  width:10px; height:10px;
  border-radius: 50%;
  background: rgba(0,255,150,.9);
  box-shadow: 0 0 0 3px rgba(0,255,150,.15);
}
.badge.live{ color: rgba(220,255,245,.92); }

.badge.js-status.loaded{
  color: rgba(200,255,220,.95);
  border-color: rgba(0,255,150,.22);
}
.badge.js-status.error{
  color: rgba(255,210,210,.95);
  border-color: rgba(255,80,80,.25);
}

/* Toolbar */
.toolbar{
  padding: 10px 18px 12px 18px;
  display:flex;
  gap:14px;
  align-items:center;
  justify-content:space-between;
  border-bottom: 1px solid rgba(255,255,255,.06);
  background: rgba(255,255,255,.02);
  backdrop-filter: blur(14px);
  z-index: 40;
}
.toolbar-left,.toolbar-mid,.toolbar-right{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.chip{
  border-radius: 999px;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color: var(--text);
  cursor:pointer;
}
.chip:hover{ background: rgba(255,255,255,.06); }
.chip.primary{
  background: rgba(120,160,255,.28);
  border-color: rgba(120,160,255,.35);
}
.chip.ghost{
  opacity:.6;
}

/* Content scroll area */
.content{
  overflow:auto;
  padding: 18px;
  min-height:0;
}
.view{ display:none; }
.view.active{ display:block; }

.card{
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
  margin-bottom: 16px;
  backdrop-filter: blur(18px);
}
.card-title{
  font-size: 18px;
  font-weight: 800;
  margin-bottom: 10px;
}
.muted{ color: var(--muted); }
.muted.small{ font-size: 12px; }
.row{ display:flex; }
.gap{ gap:10px; }
.space-between{ justify-content:space-between; }
.align-center{ align-items:center; }

.btn{
  border-radius: 999px;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color: var(--text);
  cursor:pointer;
}
.btn:hover{ background: rgba(255,255,255,.06); }
.btn.primary{
  background: rgba(120,160,255,.30);
  border-color: rgba(120,160,255,.38);
}

.bullets{ margin: 0; padding-left: 18px; color: var(--muted); }
.bullets b{ color: var(--text); }

.grid2{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}
.stat{
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.03);
  padding: 12px;
}
.stat-label{ color: var(--muted); font-size: 12px; }
.stat-value{ font-size: 22px; font-weight: 900; margin-top:6px; }

.month-title{ font-size: 20px; font-weight: 900; }

/* Calendar */
.calendar-grid{
  margin-top: 12px;
  display:grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 10px;
}
.calendar-grid.big{ gap: 12px; }
.daycell{
  padding: 10px 0;
  border-radius: 14px;
  text-align:center;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.03);
  color: var(--text);
  cursor:pointer;
  user-select:none;
}
.daycell:hover{ background: rgba(255,255,255,.06); }
.daycell.muted{ opacity:.35; cursor:default; }
.daycell.today{
  border-color: rgba(0,255,150,.25);
  box-shadow: 0 0 0 3px rgba(0,255,150,.12) inset;
}
.daycell.selected{
  border-color: rgba(120,160,255,.35);
  background: rgba(120,160,255,.18);
}

/* Tabs */
.tabs{
  display:flex;
  gap:10px;
  margin: 12px 0 12px 0;
}
.tab{
  border-radius: 999px;
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  color: var(--text);
  cursor:pointer;
}
.tab.active{
  background: rgba(120,160,255,.26);
  border-color: rgba(120,160,255,.35);
}
.tabpanel{ display:none; }
.tabpanel.active{ display:block; }

/* Sheet */
.sheet-wrap{
  overflow:auto;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(0,0,0,.10);
}
.sheet{
  width:100%;
  border-collapse: collapse;
  min-width: 720px;
}
.sheet th, .sheet td{
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,.07);
  color: var(--text);
  font-size: 13px;
}
.sheet th{
  text-transform: uppercase;
  letter-spacing: .8px;
  font-size: 12px;
  color: var(--muted);
}
.cell-input{
  width:100%;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  color: var(--text);
  border-radius: 12px;
  padding: 8px 10px;
  outline: none;
}
.cell-input:focus{
  border-color: rgba(120,160,255,.45);
  box-shadow: 0 0 0 3px rgba(120,160,255,.18);
}

/* Notes */
.notes{
  width:100%;
  min-height: 220px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  color: var(--text);
  padding: 12px;
  outline:none;
  resize: vertical;
}

/* Modal */
.modal-backdrop{
  position: fixed;
  inset: 0;
  z-index: 999;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(10px);
  display:grid;
  place-items:center;
  padding: 18px;
}
.modal{
  width: min(520px, 100%);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(20,30,60,.88);
  box-shadow: 0 25px 90px rgba(0,0,0,.55);
}
.modal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 14px 14px 10px 14px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.modal-title{ font-weight: 900; }
.iconbtn{
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  color: var(--text);
  border-radius: 12px;
  padding: 8px 10px;
  cursor:pointer;
}
.modal-body{
  display:flex;
  flex-direction:column;
  gap: 10px;
  padding: 14px;
}
.form-row{
  display:grid;
  grid-template-columns: 120px 1fr;
  gap: 10px;
  align-items:center;
}
.form-row label{ color: var(--muted); font-size: 13px; }
.modal-body input, .modal-body textarea{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  color: var(--text);
  padding: 10px 10px;
  outline:none;
}
.modal-body textarea{ min-height: 90px; resize: vertical; }
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap: 10px;
  margin-top: 6px;
}

.empty{
  padding: 16px;
  border-radius: 16px;
  border: 1px dashed rgba(255,255,255,.14);
  color: var(--muted);
  background: rgba(255,255,255,.02);
  margin-top: 10px;
}

/* iPad / touch sanity */
.sidebar, .topbar, .toolbar, .content{
  touch-action: manipulation;
}

/* Responsive */
@media (max-width: 920px){
  :root{ --sidebar-w: 240px; }
}
@media (max-width: 740px){
  .app-shell{ grid-template-columns: 1fr; }
  .sidebar{ display:none; }
  .sheet{ min-width: 640px; }
}
/* ===== Scroll Fix (keep layout, restore scrolling) ===== */

/* Lock the app to the viewport */
html, body {
  height: 100%;
  overflow: hidden; /* prevents the whole page from scrolling weirdly */
}

/* Your main grid wrapper */
.app-shell {
  height: 100vh;
  min-height: 100vh;
}

/* Sidebar: allow scrolling inside it */
.sidebar {
  height: 100vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Main area: set up a proper scroll container */
.main {
  height: 100vh;
  overflow: hidden; /* main itself doesn't scroll, the content inside does */
  display: flex;
  flex-direction: column;
}

/* Topbar stays visible */
.topbar {
  flex: 0 0 auto;
  position: sticky;
  top: 0;
  z-index: 50;
}

/* This is the scrollable content area under the topbar */
.views, .content, .main-content {
  flex: 1 1 auto;
  overflow-y: auto;
  min-height: 0; /* critical for iOS + flex scrolling */
  -webkit-overflow-scrolling: touch;
}
/* ===== Toolbar horizontal scroll (iPad-friendly) ===== */

/* The toolbar row that contains the buttons */
.toolbar,
.topbar .toolbar,
.topbar-right,
.topbar-center,
.topbar-actions {
  min-width: 0;
}

/* Make the actual button row swipe-scroll horizontally */
.toolbar {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  white-space: nowrap;
  scrollbar-width: none; /* Firefox */
}
.toolbar::-webkit-scrollbar {
  display: none; /* iOS/Safari/Chrome */
}

/* Keep toolbar items in a single line and not squished */
.toolbar > * {
  display: inline-flex;
  flex: 0 0 auto;
}
/* ===== Sidebar (toolbar) scroll fix ===== */

/* Make the sidebar a full-height column */
.sidebar{
  height: 100vh;              /* full viewport height */
  display: flex;
  flex-direction: column;
  overflow: hidden;           /* prevent whole sidebar from scrolling weirdly */
}

/* This is the part that should scroll (your menu buttons) */
.sidebar nav{
  flex: 1 1 auto;             /* take remaining height */
  overflow-y: auto;           /* enable vertical scrolling */
  -webkit-overflow-scrolling: touch; /* iOS momentum scroll */
  min-height: 0;              /* REQUIRED for flex children to actually scroll */
}

/* Footer stays pinned at the bottom */
.sidebar-footer{
  flex: 0 0 auto;
}

/* Optional: keep main content scrolling normally */
.main{
  height: 100vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  min-height: 0;
}
/* ================================
   SCROLL + LAYOUT FIX (iPad/Safari)
   Paste at END of styles.css
================================== */

/* 1) Make the app shell a real full-height container */
html, body {
  height: 100%;
}

body {
  margin: 0;
  overflow: hidden; /* body should not scroll; inner panes should */
}

/* If your app wrapper is .app-shell (your screenshots show it is) */
.app-shell {
  height: 100vh;
  min-height: 100vh;
  overflow: hidden; /* prevent double scroll */
}

/* 2) Sidebar scrolling */
.sidebar {
  height: 100vh;                 /* anchor a scroll box */
  overflow-y: auto;              /* allow scroll */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* If your nav list is inside sidebar and is the thing that should scroll */
.sidebar nav {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* 3) Main content should scroll (dashboard/calendar/day workspace) */
.main {
  height: 100vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* 4) Keep topbar visible without blocking content */
.topbar {
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(10px);
}

/* Prevent content from sliding under the sticky topbar */
.main {
  padding-top: 12px; /* small buffer; increase if your topbar is taller */
}

/* 5) OPTIONAL: make the topbar span the entire viewport width
   (This is the “straight across the top” fix without touching HTML.)
   If you want it only over the main area, delete this block.
*/
.topbar {
  width: 100vw;
  left: 0;
  right: 0;
}

/* When topbar becomes 100vw, it visually overlaps sidebar column.
   This adds breathing room so it doesn't look like a mistake.
   Adjust the value if your sidebar width differs. */
:root {
  --sidebar-w: 260px; /* change to match your real sidebar width */
}

.topbar .topbar-left,
.topbar .topbar-right {
  padding-left: var(--sidebar-w);
}

/* If your topbar doesn’t have these inner wrappers, this does nothing harmlessly. */

/* Safety: main area must actually show up */
html, body { height: 100%; }
.app-shell { min-height: 100vh; }

.main {
  min-height: 100vh;
  display: block;
}

.views {
  min-height: calc(100vh - 20px);
  display: block;
}

.view {
  display: block;
}
/* --- View system: one visible at a time --- */
.views { min-height: 0; }
.view { display: none; }
.view.active { display: block; }

/* --- Make scrolling work in the right places --- */
html, body { height: 100%; }
.app-shell { height: 100vh; }

/* Main content scrolls */
.main { min-height: 0; overflow: auto; }

/* Sidebar nav scrolls (the list of buttons) */
.sidebar { min-height: 0; overflow: hidden; }
.sidebar nav { overflow: auto; min-height: 0; -webkit-overflow-scrolling: touch; }
body {
  overflow: hidden;
}

.app-shell {
  height: 100vh;
  display: flex;
}

.main {
  flex: 1;
  overflow-y: auto;
}

.sidebar {
  height: 100vh;
  position: sticky;
  top: 0;
}
 /* ===== FORCE FULL MONTH CALENDAR GRID ===== */
#calendarGrid.calendar-grid{
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  gap: 10px;
  width: 100%;
}
#calendarGrid .dow{
  text-align: center;
  font-weight: 700;
  opacity: 0.85;
}

#calendarGrid .day{
  min-height: 56px;
  padding: 8px;
  border-radius: 14px;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
}

#calendarGrid .day.is-pad{
  opacity: 0.35;
}
/* ===== Full Month Calendar: FORCE proper 7-col grid ===== */

/* The month calendar wrapper (safe) */
#monthCalendar,
.calendar-month {
  width: 100%;
}

/* The actual grid that holds weekday headers + day cells */
#calendarGrid,
#calendarGrid.calendar-grid,
.calendar-grid.full {
  display: grid !important;
  grid-template-columns: repeat(7, minmax(36px, 1fr)) !important;
  gap: 10px !important;

  width: 100%;
  align-items: stretch;
}

/* If your JS adds weekday header cells (Sun/Mon/...) */
#calendarGrid .dow,
#calendarGrid .weekday,
#calendarGrid .week-day,
.calendar-grid .dow,
.calendar-grid .weekday {
  font-weight: 700;
  text-align: center;
  opacity: 0.85;
}

/* Day cells (the “pills”) */
#calendarGrid .day,
#calendarGrid .cell,
#calendarGrid button,
#calendarGrid .pill,
.calendar-grid .day,
.calendar-grid .cell {
  width: 100%;
  box-sizing: border-box;
  justify-self: stretch;
}

/* Prevent “inline” weirdness if weekday labels are spans */
#calendarGrid span {
  display: block;
  text-align: center;
}

/* ===== FORCE Calendar view to use full width and grid correctly ===== */

/* Make sure the calendar view card isn't acting like a narrow column */
#view-calendar .card,
#view-calendar .calendar-card,
#view-calendar .card * {
  box-sizing: border-box;
}

/* If your calendar view uses the common .card wrapper */
#view-calendar .card {
  width: 100% !important;
  max-width: none !important;
  display: block !important;
}

/* The month header row (Month title + nav buttons) should stretch */
#view-calendar .row,
#view-calendar .space-between,
#view-calendar .row.space-between {
  width: 100% !important;
  display: flex !important;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: nowrap;
}

/* The month calendar containers must take full width */
#monthCalendar,
.calendar-month,
#calendarGrid,
.calendar-grid,
.calendar-grid.full {
  width: 100% !important;
  max-width: none !important;
}

/* THIS is the key: force the full month grid into a 7-column grid */
#calendarGrid,
.calendar-grid.full {
  display: grid !important;
  grid-template-columns: repeat(7, minmax(34px, 1fr)) !important;
  gap: 10px !important;
  align-items: stretch;
}

/* Weekday headers should each occupy a grid cell */
#calendarGrid .dow,
#calendarGrid .weekday,
#calendarGrid .week-day {
  display: block !important;
  text-align: center;
  font-weight: 700;
  opacity: 0.85;
}

/* Day cells (pills/buttons) should fill their grid cell */
#calendarGrid .day,
#calendarGrid .cell,
#calendarGrid button,
#calendarGrid .pill {
  width: 100% !important;
  justify-self: stretch;
}

/* If something is causing the calendar to "float left", kill that */
#calendarGrid,
#monthCalendar,
.calendar-month {
  float: none !important;
}

/* Calendar day markers + day workspace rows */
#calendarGrid .day { display:flex; flex-direction:column; gap:6px; }
#calendarGrid .day .markers { font-size:12px; opacity:.85; }

#calendarGrid .day.has-completed { outline: 1px solid rgba(80, 220, 140, .45); }
#calendarGrid .day.has-scheduled { outline: 1px solid rgba(120, 160, 255, .35); }
#calendarGrid .day.has-cancelled { outline: 1px solid rgba(255, 120, 120, .35); }

#dayJobsList .job-row { display:flex; justify-content:space-between; gap:12px; padding:10px; border-radius:12px; }
#dayJobsList .job-actions { display:flex; gap:8px; align-items:center; }
#dayJobsList .job-status { min-width: 130px; }
